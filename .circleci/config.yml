version: 2.1
executors:
  unity:
    parameters:
      unity_version: { type: string }
    docker:
      #- image: gableroux/unity3d:<< parameters.unity_version >> 2019.1.14f1
      - image: gableroux/unity3d:2019.1.14f1
jobs:
  test-job:
    executor:
      name: unity
    steps:
      - checkout
      - run: openssl aes-256-cbc -d -in .circleci/Unity_v2019.x.ulf-cipher -k ${CIPHER_KEY} >> .circleci/Unity_v2019.x.ulf
      - run: /opt/Unity/Editor/Unity -quit -batchmode -nographics -silent-crashes -logFile -manualLicenseFile .circleci/Unity_v2019.x.ulf || exit 0
workflows:
  version: 2
  test-workflow:
    jobs:
      - test-job:
          version: 2019.1.14f1